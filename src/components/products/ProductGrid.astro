---
import ProductCard from './ProductCard.astro';
import productsData from '../../data/products.json';
import { getLangFromUrl, useTranslations } from '../../i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

interface Props {
  category: 'pesticides' | 'fertilizers';
}

const { category } = Astro.props;
const products = productsData[category];
---

<section class="py-12">
  <div class="container mx-auto px-4">
    <h2 class="text-3xl font-bold text-center mb-8">{t(`products.${category}.title`)}</h2>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
      {products.map((product) => (
        <ProductCard {...product} />
      ))}
    </div>
  </div>
</section>
